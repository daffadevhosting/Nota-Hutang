---
layout: default
title: Login
header: Catat & Tagih
---

<div class="login-box">
    <h2>{{site.title}}</h2>
    <p>Masuk untuk mulai mencatat</p>
    <button onclick="loginGoogle()">Masuk dengan Google</button>
</div>

<!-- Hapus defer -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const firebaseConfig = {
      apiKey: "AIzaSyCiT9DTiVun4mKJAenmEHkhZ9jrjNMTEZs",
      authDomain: "notahutangmu.firebaseapp.com",
      projectId: "notahutangmu",
      storageBucket: "notahutangmu.firebasestorage.app",
      messagingSenderId: "978954750002",
      appId: "1:978954750002:web:4dd533087767ef08b4d42b",
      measurementId: "G-54WD1L6R9Q"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();

    window.loginGoogle = function () {
      auth.signInWithPopup(provider)
        .then(result => {
          window.location.href = "/catat";
        })
        .catch(error => {
          alert("Login gagal: " + error.message);
        });
    }

    auth.onAuthStateChanged(user => {
      if (user) {
        window.location.href = "/catat";
      }
    });
  });
</script>